---
title: Doświadczenia z Machine Learning Studio (klasyczne)
description: Korzystanie z modeli Machine Learning Studio (klasycznych) w Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: ameetj
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 71881f7e1f9448fe0a7d6d92b8102b8b42de7c2a
ms.sourcegitcommit: bae40184312ab27b95c140a044875c2daea37951
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/15/2021
ms.locfileid: "5598352"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="fcf48-103">Użyj modeli opartych na Azure Machine Learning Studio (klasyczna)</span><span class="sxs-lookup"><span data-stu-id="fcf48-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="fcf48-104">Zunifikowane dane w Dynamics 365 Customer Insights są źródłem budowania modeli uczenia maszynowego, które mogą generować dodatkowe informacje o firmie.</span><span class="sxs-lookup"><span data-stu-id="fcf48-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="fcf48-105">Customer Insights integruje się z Machine Learning Studio (klasycznym), aby używać własnych modeli niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="fcf48-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="fcf48-106">Aby zobaczyć, jak modele opracowane w Azure Machine Learning są zintegrowane z Customer Insights, zobacz [Eksperymenty usługi Azure Machine Learning](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="fcf48-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="fcf48-107">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="fcf48-107">Prerequisites</span></span>

- <span data-ttu-id="fcf48-108">Dostęp do Customer Insights</span><span class="sxs-lookup"><span data-stu-id="fcf48-108">Access to Customer Insights</span></span>
- <span data-ttu-id="fcf48-109">Aktywna subskrypcja Azure Enterprise</span><span class="sxs-lookup"><span data-stu-id="fcf48-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="fcf48-110">Ujednolicone profile klientów</span><span class="sxs-lookup"><span data-stu-id="fcf48-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="fcf48-111">Konfiguracja [Eksportowanie encji do magazynu obiektów Blob Azure](export-azure-blob-storage.md)</span><span class="sxs-lookup"><span data-stu-id="fcf48-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="fcf48-112">Skonfiguruj usługę Machine Learning Studio Classic</span><span class="sxs-lookup"><span data-stu-id="fcf48-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="fcf48-113">W pierwszym kroku musimy utworzyć obszar roboczy i otworzyć Machine Learning Studio (klasyczne).</span><span class="sxs-lookup"><span data-stu-id="fcf48-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="fcf48-114">Przejdź do [https://www.portal.azure.com](https://www.portal.azure.com/) i zaloguj się.</span><span class="sxs-lookup"><span data-stu-id="fcf48-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="fcf48-115">Wybierz **Utwórz zasób**.</span><span class="sxs-lookup"><span data-stu-id="fcf48-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="fcf48-116">Wyszukaj **Obszar roboczy Machine Learning Studio** i wybierz **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="fcf48-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="fcf48-117">Wprowadź wymagane informacje szczegółowe, aby [utworzyć obszar roboczy](/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="fcf48-117">Enter the required details to [create the workspace](/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="fcf48-118">Wybierz **Warstwa cenowa planu usług sieci Web** na podstawie ilości danych do zaimportowania.</span><span class="sxs-lookup"><span data-stu-id="fcf48-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="fcf48-119">W celu zapewnienia optymalnej wydajności należy wybrać **Lokalizację**, która znajduje się najbliżej.</span><span class="sxs-lookup"><span data-stu-id="fcf48-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="fcf48-120">Po utworzeniu zasobu zostanie wyświetlony pulpit nawigacyjny Obszar roboczy Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="fcf48-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="fcf48-121">Wybierz **Uruchom Machine Learning Studio**.</span><span class="sxs-lookup"><span data-stu-id="fcf48-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Interfejs użytkownika Azure Machine Learning Studio](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="fcf48-123">Praca z Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="fcf48-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="fcf48-124">Teraz możesz utworzyć nowy eksperyment lub zaimportować istniejący szablon eksperymentu z galerii przykładów.</span><span class="sxs-lookup"><span data-stu-id="fcf48-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="fcf48-125">Istnieją przykładowe eksperymenty dla trzech standardowych scenariuszy:</span><span class="sxs-lookup"><span data-stu-id="fcf48-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="fcf48-126">Przewidywanie rezygnacji</span><span class="sxs-lookup"><span data-stu-id="fcf48-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="fcf48-127">Wartość okresu istnienia klienta</span><span class="sxs-lookup"><span data-stu-id="fcf48-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="fcf48-128">Rekomendacje dotyczące produktu lub następne najlepsze działanie</span><span class="sxs-lookup"><span data-stu-id="fcf48-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="fcf48-129">W przypadku tworzenia nowego eksperymentu lub korzystania z szablonu eksperymentu z galerii należy skonfigurować właściwości **Importuj dane**.</span><span class="sxs-lookup"><span data-stu-id="fcf48-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="fcf48-130">Skorzystaj z przewodnika lub bezpośrednio podaj szczegóły, aby uzyskać dostęp do usługi Azure Blob Storage, która zawiera Twoje dane.</span><span class="sxs-lookup"><span data-stu-id="fcf48-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Eksperyment Azure Machine Learning Studio](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="fcf48-132">Teraz można utworzyć dostosowany potok przetwarzania w celu oczyszczenia i wstępnego przetworzenia danych, wyodrębnienia funkcji i wyuczenia odpowiedniego modelu.</span><span class="sxs-lookup"><span data-stu-id="fcf48-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="fcf48-133">Przetestuj i zoptymalizuj wydajność modelu.</span><span class="sxs-lookup"><span data-stu-id="fcf48-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="fcf48-134">Jeśli jakość modelu jest zadowalająca, wybierz **Konfigurowanie usługi sieci Web** > **Predykcyjna usługa sieci Web**.</span><span class="sxs-lookup"><span data-stu-id="fcf48-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="fcf48-135">Ta opcja powoduje zaimportowanie wyszkolonych modeli i potoku funkcji z eksperymentu szkoleniowego do usługi predykcyjnej.</span><span class="sxs-lookup"><span data-stu-id="fcf48-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="fcf48-136">Usługa predykcyjna może wziąć kolejny zestaw danych wejściowych ze schematem użytym w doświadczeniu szkoleniowym w celu sporządzenia przewidywań.</span><span class="sxs-lookup"><span data-stu-id="fcf48-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Konfigurowanie predykcyjnej usługi sieci Web](media/predictive-webservice-control.png)

1. <span data-ttu-id="fcf48-138">Po pomyślnym wyniku predykcyjnej usługi sieci Web można ją wdrożyć na potrzeby automatycznego planowania.</span><span class="sxs-lookup"><span data-stu-id="fcf48-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="fcf48-139">Aby usługa sieci Web działała z Customer Insights, wybierz **Wdróż usługę sieci Web** > **Wdróż usługę sieci Web [Nowa] Wersja zapoznawcza**.</span><span class="sxs-lookup"><span data-stu-id="fcf48-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="fcf48-140">[Więcej informacji na temat wdrażania usługi sieci Web](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="fcf48-140">[Learn more about deploying a web service](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Wdrażania predykcyjnej usługi sieci Web](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="fcf48-142">Przykładowe modele z galerii</span><span class="sxs-lookup"><span data-stu-id="fcf48-142">Sample models from the gallery</span></span>

<span data-ttu-id="fcf48-143">Będziemy używać fikcyjnego scenariusza hotelu Contoso dla modeli w niniejszym artykule.</span><span class="sxs-lookup"><span data-stu-id="fcf48-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="fcf48-144">Hotel Contoso gromadzi następujące dane:</span><span class="sxs-lookup"><span data-stu-id="fcf48-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="fcf48-145">Dane CRM złożone z działania Pobyty w hotelu.</span><span class="sxs-lookup"><span data-stu-id="fcf48-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="fcf48-146">Zestaw danych zawiera informacje o datach pobytu każdego zarejestrowanego klienta.</span><span class="sxs-lookup"><span data-stu-id="fcf48-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="fcf48-147">Zawiera także informacje o rezerwacji, typach pokojów, szczegółach wydatków itp.</span><span class="sxs-lookup"><span data-stu-id="fcf48-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="fcf48-148">Dane obejmują cztery lata, od stycznia 2014 do stycznia 2018.</span><span class="sxs-lookup"><span data-stu-id="fcf48-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="fcf48-149">Profile klientów gości hotelu.</span><span class="sxs-lookup"><span data-stu-id="fcf48-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="fcf48-150">Te profile zawierają informacje o każdym kliencie, takie jak imię i nazwisko, data urodzenia, adres pocztowy, płeć i numer telefonu.</span><span class="sxs-lookup"><span data-stu-id="fcf48-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="fcf48-151">Korzystanie z usług oferowanych przez hotel, takich jak spa, pranie, sieć WiFi lub kurier.</span><span class="sxs-lookup"><span data-stu-id="fcf48-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="fcf48-152">Te informacje są rejestrowane dla każdego zarejestrowanego klienta.</span><span class="sxs-lookup"><span data-stu-id="fcf48-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="fcf48-153">Zazwyczaj korzystanie z usług jest powiązane z pobytem.</span><span class="sxs-lookup"><span data-stu-id="fcf48-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="fcf48-154">W niektórych przypadkach z usług mogą korzystać klienci, którzy nie zatrzymali się w hotelu.</span><span class="sxs-lookup"><span data-stu-id="fcf48-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="fcf48-155">Analiza zmian</span><span class="sxs-lookup"><span data-stu-id="fcf48-155">Churn Analysis</span></span>

<span data-ttu-id="fcf48-156">Analiza zmian jest stosowana do różnych obszarów biznesowych.</span><span class="sxs-lookup"><span data-stu-id="fcf48-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="fcf48-157">W tym przykładzie zajmiemy się analizą zmian, szczególnie w kontekście opisanych powyżej usług hotelowych.</span><span class="sxs-lookup"><span data-stu-id="fcf48-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="fcf48-158">Zawiera przykład kompleksowego model potoku, który może pełnić rolę punktu wyjścia każdego innego typu modeli zmian.</span><span class="sxs-lookup"><span data-stu-id="fcf48-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="fcf48-159">Definicja zmian</span><span class="sxs-lookup"><span data-stu-id="fcf48-159">Definition of Churn</span></span>

<span data-ttu-id="fcf48-160">Definicja zmian może się różnić w zależności od scenariusza.</span><span class="sxs-lookup"><span data-stu-id="fcf48-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="fcf48-161">W tym przykładzie gość, który nie odwiedził hotelu w ubiegłym roku powinien zostać oznaczony jako klient, który zrezygnował.</span><span class="sxs-lookup"><span data-stu-id="fcf48-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="fcf48-162">Szablon eksperymentu może zostać zaimportowany z galerii.</span><span class="sxs-lookup"><span data-stu-id="fcf48-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="fcf48-163">W pierwszej kolejności upewnij się, że importujesz dane dotyczące **Działanie Pobyt w hotelu**, **Dane klienta** i **Dane dotyczące użytkowania usługi** z magazynu obiektów Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="fcf48-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Importowanie danych dla modelu zmian](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="fcf48-165">Funkcje</span><span class="sxs-lookup"><span data-stu-id="fcf48-165">Featurization</span></span>

<span data-ttu-id="fcf48-166">W zależności od definicji zmian, w pierwszej kolejności identyfikujemy surowe funkcje, które będą miały wpływ na etykietę.</span><span class="sxs-lookup"><span data-stu-id="fcf48-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="fcf48-167">Następnie przetwarzamy te surowe funkcje na funkcje liczbowe, które mogą być używane z modelami Uczenie maszynowe.</span><span class="sxs-lookup"><span data-stu-id="fcf48-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="fcf48-168">Integracja danych jest wykonywana w programie Customer Insights, dzięki czemu można przyłączyć się do tych tabel przy użyciu *Identyfikatora klienta*.</span><span class="sxs-lookup"><span data-stu-id="fcf48-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Dołącz zaimportowane dane](media/join-imported-data.png)

<span data-ttu-id="fcf48-170">Zapewnienie funkcji dla konstruowania modelu dla analizy zmian może być nieco trudne.</span><span class="sxs-lookup"><span data-stu-id="fcf48-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="fcf48-171">Dane są funkcją czasu z nowym działaniem hotelu odnotowywanym codziennie.</span><span class="sxs-lookup"><span data-stu-id="fcf48-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="fcf48-172">Podczas zapewniania funkcji chcemy wygenerować statyczne funkcje z danych dynamicznych.</span><span class="sxs-lookup"><span data-stu-id="fcf48-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="fcf48-173">W tym przypadku generujemy wiele funkcji z działania w hotelu z oknem przesuwanym obejmującym jeden rok.</span><span class="sxs-lookup"><span data-stu-id="fcf48-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="fcf48-174">Ponadto rozwijamy funkcje kategorii, takie jak typ pokoju lub typ rezerwacji, na różne funkcje, korzystając z kodowania jednokrotnego.</span><span class="sxs-lookup"><span data-stu-id="fcf48-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="fcf48-175">Ostateczna lista funkcji:</span><span class="sxs-lookup"><span data-stu-id="fcf48-175">Final list of features:</span></span>

| <span data-ttu-id="fcf48-176">**Numer**</span><span class="sxs-lookup"><span data-stu-id="fcf48-176">**Number**</span></span>  | <span data-ttu-id="fcf48-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="fcf48-177">**Original_Column**</span></span>          | <span data-ttu-id="fcf48-178">**Funkcje pochodne**</span><span class="sxs-lookup"><span data-stu-id="fcf48-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="fcf48-179">1</span><span class="sxs-lookup"><span data-stu-id="fcf48-179">1</span></span>           | <span data-ttu-id="fcf48-180">Typ pokoju</span><span class="sxs-lookup"><span data-stu-id="fcf48-180">Room Type</span></span>                    | <span data-ttu-id="fcf48-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="fcf48-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="fcf48-182">2</span><span class="sxs-lookup"><span data-stu-id="fcf48-182">2</span></span>           | <span data-ttu-id="fcf48-183">Typ rezerwacji</span><span class="sxs-lookup"><span data-stu-id="fcf48-183">Booking Type</span></span>                 | <span data-ttu-id="fcf48-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="fcf48-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="fcf48-185">3</span><span class="sxs-lookup"><span data-stu-id="fcf48-185">3</span></span>           | <span data-ttu-id="fcf48-186">Kategoria podróży</span><span class="sxs-lookup"><span data-stu-id="fcf48-186">Travel Category</span></span>              | <span data-ttu-id="fcf48-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="fcf48-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="fcf48-188">100</span><span class="sxs-lookup"><span data-stu-id="fcf48-188">4</span></span>           | <span data-ttu-id="fcf48-189">Wydana kwota w dolarach</span><span class="sxs-lookup"><span data-stu-id="fcf48-189">Dollars Spent</span></span>                | <span data-ttu-id="fcf48-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="fcf48-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="fcf48-191">5</span><span class="sxs-lookup"><span data-stu-id="fcf48-191">5</span></span>           | <span data-ttu-id="fcf48-192">Data zameldowania się i Wymeldowanie</span><span class="sxs-lookup"><span data-stu-id="fcf48-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="fcf48-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="fcf48-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="fcf48-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="fcf48-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="fcf48-195">6</span><span class="sxs-lookup"><span data-stu-id="fcf48-195">6</span></span>           | <span data-ttu-id="fcf48-196">Wykorzystanie usług</span><span class="sxs-lookup"><span data-stu-id="fcf48-196">Service Usage</span></span>                | <span data-ttu-id="fcf48-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="fcf48-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="fcf48-198">Wybór modelu</span><span class="sxs-lookup"><span data-stu-id="fcf48-198">Model selection</span></span>

<span data-ttu-id="fcf48-199">Teraz musimy wybrać optymalny algorytm.</span><span class="sxs-lookup"><span data-stu-id="fcf48-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="fcf48-200">W tym przypadku większość funkcji opiera się na funkcjach będących kategoriami.</span><span class="sxs-lookup"><span data-stu-id="fcf48-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="fcf48-201">Zazwyczaj sprawdzają się modele bazujące na drzewie decyzji.</span><span class="sxs-lookup"><span data-stu-id="fcf48-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="fcf48-202">Jeśli są dostępne tylko funkcje liczbowe, sieć neuronowa może być lepszą opcją.</span><span class="sxs-lookup"><span data-stu-id="fcf48-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="fcf48-203">Wektorowa maszyna pomocnicza (SVM) również jest dobrym kandydatem w takich sytuacjach; w celu wyodrębnienia najlepszej wydajności konieczne jest jednak przeprowadzenie dostosowania.</span><span class="sxs-lookup"><span data-stu-id="fcf48-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="fcf48-204">Wybieramy **Dwuklasowe drzewo decyzji** jako pierwszy model, a **Dwuklasowy model SVM** jako drugi.</span><span class="sxs-lookup"><span data-stu-id="fcf48-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="fcf48-205">Usługa Azure Machine Learning Studio umożliwia testowanie A/B, więc korzystniej jest zacząć od dwóch modeli, a nie jednego.</span><span class="sxs-lookup"><span data-stu-id="fcf48-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="fcf48-206">Na następującym rysunku przedstawiono model szkoleń i potok oceny z Azure Machine Learning Studio:</span><span class="sxs-lookup"><span data-stu-id="fcf48-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Model zmian w Azure Machine Learning Studio](media/azure-machine-learning-model.png)

<span data-ttu-id="fcf48-208">Stosujemy również technikę o nazwie **Ważność funkcji Permutacja**, ważny aspekt optymalizacyjny modelu.</span><span class="sxs-lookup"><span data-stu-id="fcf48-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="fcf48-209">Wbudowane modele mają znikomy wgląd we wpływ konkretnej funkcji na końcowe przewidywanie.</span><span class="sxs-lookup"><span data-stu-id="fcf48-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="fcf48-210">Kalkulator ważności funkcji używa niestandardowego algorytmu w celu obliczenia wpływu poszczególnych funkcji na wyniki dla określonego modelu.</span><span class="sxs-lookup"><span data-stu-id="fcf48-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="fcf48-211">Ważność funkcji jest znormalizowana w zakresie od +1 do -1.</span><span class="sxs-lookup"><span data-stu-id="fcf48-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="fcf48-212">Negatywny wpływ oznacza, że odpowiednia funkcja ma szkodliwy wpływ na wyniki i powinna zostać usunięta z modelu.</span><span class="sxs-lookup"><span data-stu-id="fcf48-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="fcf48-213">Dodatni wpływ oznacza, że funkcja jest znacząco przyczynia się do przewidywania.</span><span class="sxs-lookup"><span data-stu-id="fcf48-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="fcf48-214">Te wartości nie są współczynnikami korelacji, ponieważ są różnymi metrykami.</span><span class="sxs-lookup"><span data-stu-id="fcf48-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="fcf48-215">Aby uzyskać więcej informacji, zobacz [Ważność funkcji Permutacja](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="fcf48-215">For more information, see [Permutation Feature Importance](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="fcf48-216">Cały [eksperyment zmian jest dostępny w Galeria sztucznej inteligencji platformy Azure](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="fcf48-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="fcf48-217">Przewidywanie Wartość okresu istnienia klienta</span><span class="sxs-lookup"><span data-stu-id="fcf48-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="fcf48-218">Obliczanie wartości okresu istnienia klienta (CLTV) jest jedną z kluczowych metryk, które mogą być używane w działalności biznesowej do oceny i segmentacji klientów.</span><span class="sxs-lookup"><span data-stu-id="fcf48-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="fcf48-219">W przypadku działalności hotelowej znajomość klientów jest kwestią kluczową.</span><span class="sxs-lookup"><span data-stu-id="fcf48-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="fcf48-220">Na przykład zrozumienie czynników, które tworzą dobrych klientów, to podstawowe informacje.</span><span class="sxs-lookup"><span data-stu-id="fcf48-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="fcf48-221">Pomaga to kierownictwu hotelu ocenić, na jakich funkcjach należy się skupić, aby je usprawnić, a przez to zaspokoić najlepszych klientów.</span><span class="sxs-lookup"><span data-stu-id="fcf48-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="fcf48-222">Te decyzje mogą mieć bezpośredni wpływ na sprzedaż i zarobki.</span><span class="sxs-lookup"><span data-stu-id="fcf48-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="fcf48-223">Definicja CLTV</span><span class="sxs-lookup"><span data-stu-id="fcf48-223">Definition of CLTV</span></span>

<span data-ttu-id="fcf48-224">W tym przykładzie definiujemy CLTV klienta jako łączną kwotę w dolarach, jaką klient ma wydać w ciągu następnych 365 dni.</span><span class="sxs-lookup"><span data-stu-id="fcf48-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="fcf48-225">W celu przewidzenia tej wartości użyjemy danych dla wszystkich klientów z ostatnich trzech lat.</span><span class="sxs-lookup"><span data-stu-id="fcf48-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="fcf48-226">Funkcje</span><span class="sxs-lookup"><span data-stu-id="fcf48-226">Featurization</span></span>

<span data-ttu-id="fcf48-227">W tym przypadku zapewnianie funkcji będzie znacznie przypominać scenariusz zmian.</span><span class="sxs-lookup"><span data-stu-id="fcf48-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="fcf48-228">Etykiety i przewidywane wartości są jednak inne niż określone powyżej.</span><span class="sxs-lookup"><span data-stu-id="fcf48-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="fcf48-229">Wybór modelu</span><span class="sxs-lookup"><span data-stu-id="fcf48-229">Model selection</span></span>

<span data-ttu-id="fcf48-230">Przewidywanie CLTV to problem regresji, ponieważ przewidywana wartość jest zmienną ciągłą o wartości dodatniej.</span><span class="sxs-lookup"><span data-stu-id="fcf48-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="fcf48-231">W zależności od właściwości funkcji wybieramy **Regresję drzewa decyzji** jako jeden algorytm i **Regresję sieci neuronowej** jako kolejny algorytm szkolenia modelu.</span><span class="sxs-lookup"><span data-stu-id="fcf48-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="fcf48-232">Rekomendacje dotyczące produktu lub Następne najlepsze działanie</span><span class="sxs-lookup"><span data-stu-id="fcf48-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="fcf48-233">Zalecenie dotyczące produktu w scenariuszu hotelu jest interpretowane jako rekomendowanie usług oferowanych klientom w hotelu.</span><span class="sxs-lookup"><span data-stu-id="fcf48-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="fcf48-234">Zamierzeniem jest wybranie odpowiednich usług dla klientów, aby ich użycie zostało zmaksymalizowane.</span><span class="sxs-lookup"><span data-stu-id="fcf48-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="fcf48-235">Jest to podobne do rekomendacji filmów dla usługi strumieniowego przesyłania wideo.</span><span class="sxs-lookup"><span data-stu-id="fcf48-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="fcf48-236">Definicja rekomendacji produktu lub Następne najlepsze działanie</span><span class="sxs-lookup"><span data-stu-id="fcf48-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="fcf48-237">Cel jest definiowany jako maksymalizacja kwoty w dolarach za skorzystanie z usług dzięki najlepszemu dopasowaniu usług do klientów hotelu, w zależności od ich zainteresowań.</span><span class="sxs-lookup"><span data-stu-id="fcf48-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="fcf48-238">Funkcje</span><span class="sxs-lookup"><span data-stu-id="fcf48-238">Featurization</span></span>

<span data-ttu-id="fcf48-239">Podobnie jak w przypadku modelu zmiany, dołączamy ServiceCustomerID hotelu z CustomerID, aby zbudować rekomendacje w sposób konsekwentny dla CustomerID.</span><span class="sxs-lookup"><span data-stu-id="fcf48-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Funkcje modelu rekomendacji](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="fcf48-241">Dane pochodzą z trzech różnych encji a funkcje się od nich wywodzą.</span><span class="sxs-lookup"><span data-stu-id="fcf48-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="fcf48-242">Zapewnienie funkcji dla problemu rekomendacji jest inne niż scenariusze zmian lub CLTV.</span><span class="sxs-lookup"><span data-stu-id="fcf48-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="fcf48-243">Model rekomendacji wymaga danych wejściowych w formie trzech zestawów funkcji.</span><span class="sxs-lookup"><span data-stu-id="fcf48-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="fcf48-244">Wybór modelu</span><span class="sxs-lookup"><span data-stu-id="fcf48-244">Model selection</span></span>

<span data-ttu-id="fcf48-245">Przewidujemy produkty lub usługi, korzystając z algorytmu o nazwie **Trenowanie modułu rekomendowania Matchbox**, aby przeszkolić model rekomendacji.</span><span class="sxs-lookup"><span data-stu-id="fcf48-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Algorytm rekomendacji produktów](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="fcf48-247">Trzy porty wejściowe dotyczące modelu **Trenowanie modułu rekomendowania Matchbox** bierze dane dotyczące użytkowania usługi szkoleń, opis klienta (opcjonalnie) i opis usługi.</span><span class="sxs-lookup"><span data-stu-id="fcf48-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="fcf48-248">Istnieją trzy różne sposoby oceniania modelu.</span><span class="sxs-lookup"><span data-stu-id="fcf48-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="fcf48-249">Jeden jest dla oceny modelu, gdzie wynik Znormalizowany skumulowany zysk rabatowy (NDCG) jest obliczany w celu nadania rangi ocenionym elementom.</span><span class="sxs-lookup"><span data-stu-id="fcf48-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="fcf48-250">W tym doświadczeniu wynik NDCG wynosi 0,97.</span><span class="sxs-lookup"><span data-stu-id="fcf48-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="fcf48-251">Pozostałe dwie opcje to ocenianie modelu ba całym zalecanym katalogu usług lub ocenianie tylko na podstawie elementów, z których użytkownicy nie korzystali wcześniej.</span><span class="sxs-lookup"><span data-stu-id="fcf48-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="fcf48-252">Przyglądając się bliżej dystrybucji rekomendacji w odniesieniu do całego katalogu usług zauważyliśmy, że telefon, Sieć Wi-Fi i kurier są najpopularniejszymi usługami, jakie można zarekomendować.</span><span class="sxs-lookup"><span data-stu-id="fcf48-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="fcf48-253">Jest to zgodne z tym, czego dowiedzieliśmy się z rozkładu danych korzystania z usług:</span><span class="sxs-lookup"><span data-stu-id="fcf48-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Wynik modelu rekomendacji](media/azure-machine-learning-model-output.png)

<span data-ttu-id="fcf48-255">Cały [eksperyment rekomendacji produktów można zobaczyć w Galerii sztucznej inteligencji platformy Azure.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="fcf48-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="fcf48-256">Modele niestandardowe integracji</span><span class="sxs-lookup"><span data-stu-id="fcf48-256">Integrate custom models</span></span>

<span data-ttu-id="fcf48-257">Aby wykorzystać te przewidywania w Customer Insights, należy **wyeksportować** przewidywania wraz z identyfikatorami klientów.</span><span class="sxs-lookup"><span data-stu-id="fcf48-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="fcf48-258">[Wyeksportuj je w tej samej lokalizacji magazynu obiektów Azure Blob](/azure/storage/common/storage-import-export-data-from-blobs), w której są eksportowane dane źródłowe.</span><span class="sxs-lookup"><span data-stu-id="fcf48-258">[Export them to the same Azure Blob storage location](/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="fcf48-259">Przewidywana usługa sieci Web może być zaplanowana do regularnego uruchamiana i aktualizowania wyników.</span><span class="sxs-lookup"><span data-stu-id="fcf48-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="fcf48-260">Dane generowane w ramach modelu niestandardowego mogą zostać użyte do dalszego wzbogacenia danych klientów.</span><span class="sxs-lookup"><span data-stu-id="fcf48-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="fcf48-261">Aby uzyskać więcej informacji, zobacz [Niestandardowe modele uczenia maszynowego](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="fcf48-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]